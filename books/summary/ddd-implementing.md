# 도메인 주도 설계 구현

> 반 버논, 윤창석, 황예진 역, 에이콘출판, 2016 [링크](https://book.naver.com/bookdb/book_detail.nhn?bid=10382647)



에릭에반스의 [도메인 주도 설계](ddd.md) 6장을 읽다가 도무지 무슨 말을 하는 건지 이해가 잘 안되서 반 버논의 DDD를 읽기 시작.



## 1장 DDD를 시작하며

우리는 개발하는 소프트웨어의 품질을 높이려고 많은 노력을 함. 

> 하지만, 버그 없는 소프트웨어 != 양질의 소프트웨어 모델(원하는 비즈니스 목표를 이루도록 솔루션을 제공해 주는 방법) 설계

DDD의 가장 중심에 있는 원리는 (비즈니스 가치를 만들기 위해서, 가치를 만들기 위해 모인 사람이 모두 함께) 토의, 경청, 이해, 발견, 그리고 비즈니스의 가치. 모든 지식을 중앙화 하는 것.



### DDD를 하는 이유

- 도메인 전문가와 개발자의 눈 높이를 맞춘다. 소프트웨어 개발자뿐 아니라 비즈니스 관계자에게도 말이 되는 소프트웨어를 만듬.
  - 우리에겐 도메인 전문가가 없는데? 도메인 전문가는 단순 직책이 아님. 비즈니스 과정을 잘 알고 있는 사람들임. 그들은 비즈니스 도메인에 대한 배경지식을 많이 갖고 있을 뿐 아니라 상품 디자이너거나 영업 인력일 수 있음.
- 비즈니스의 현 상태에 대해 더 알려줄 수 있음. DDD를 통해, 지속적으로 비즈니스를 발견해 나가며 모든 사람이 배우게 됨.
- 도메인 전문가와 소프트웨어 개발자가 공통의 언어를 사용.
- 지식의 중앙화. 프로젝트에 참여한 일부만이 지식을 공유하는 것이 아닌 비즈니스 관련자가 모두 지식을 공유함.

일반적으로 도메인 전문가는 비즈니스의 가치를 제공하는 데, 소프트웨어 개발자는 기술적 해결하는데 집중함. 진정으로 비즈니스 가치를 제공하는 소프트웨어는 전략적 비즈니스 발의와 뜻을 같이하며 기술에 관한 것이 아닌 **비즈니스에 관한 솔루션**을 제공. 나쁜 경우는 소프트웨어가 비즈니스를 잘못된 방향으로 변경할 때 (책에서는 ERP 소프트웨어에 맞춰 조직의 비즈니스 전반을 변경하는 사례를 예로 듬).



### DDD가 해줄 수 있는 일

- 도메인 전문가와 소프트웨어 개발자가 비즈니스 전문가의 심적 모델을 반영한 소프트웨어를 함께 개발할 수 있게 해줌. 절대로 '우리와 그들'을 나누지 않고 항상 '우리'여야 함.
- 비즈니스의 전략적 이니셔티브<sup>initiative</sup> (KPI의 목표 달성을 전략적으로 가능케하는 핵심적인 활동, 계획 또는 구상)를 다룸. (TODO 아직은 무슨 말인지 잘 이해 안 됨)
- 실제 소프트웨어의 기술적 요구에 응함. 도메인 전문가의 심적 모델이 코드화 되고, 서비스 수준 계약<sup>SLA</sup>을 수행.



### DDD를 사용하는 데서 오는 비즈니스 가치

어떤 기술이나 기법을 사용할 때의 가장 훌륭한 정당화는 **비즈니스에 가치를 제공**하는 경우임.

- 조직이 그 도메인에 유용한 모델을 얻음.
- 정교하고 정확하게 비즈니스를 정의하고 이해.
- 도메인 전문가가 소프트웨어 설계에 기여.
- 사용자 경험이 개선.
- 순수한 모델 주변에 명확한 경계가 생김.
- 엔터프라이즈 아키텍쳐 구성이 좋아짐 (바운디드 컨텍스트, 컨텍스트 맵 등의 도입으로 인함).
- 애자일하고, 반복적이고, 지속적인 모델링이 사용됨.



### DDD 적용의 난관

- 유비쿼터스 언어를 만드는 데 드는 시간과 노력을 계산하는 것.
- 도메인 전문가를 시작부터 참여시키고 프로젝트 내내 함께하는 것.
- 도메인 내의 해결책에 관한 개발자의 사고방식을 바꾸는 것.



### 유비쿼터스 언어

- 팀 내에 공유된 언어. 도메인 전문가, 개발자, 해당 프로젝트에 참여하는 모든 사람 간에 공유된 언어.
- 반드시 업계 표준 용어를 사용해야 하는건 아님. 함께 공유하기만 하면 됨.
- 언어의 품질에 대해서만큼은 절대 타협하지 않으며, 오직 가장 좋은 개념과 용어의 의미가 무엇인지란 측면에서 타협함.



## 2장 도메인, 서브도메인, 바운디드컨텍스트

### 도메인
- 다소 여러 의미를 가지는 용어.
- 넓은 의미에서 한 조직이 행하는 일과 그 조직 안의 세계.
- 거의 모든 소프트웨어 도메인에는 다수의 서브 도메인이 있음.

### 핵심도메인
- 비즈니스 목표와 맥을 같이하며 서브도메인과 그 안의 모델은 지속적으로 정제되고 확장되어 감.
- 서브도메인은 크게 핵심도메인과 그 외의 도메인 (지원 서브 도메인, 범용 서브 도메인)으로 나눌 수 있음.
- 핵심 도메인은 비즈니스에 분명한 이점을 제공하기 때문에 구현에 탁월함이 요구 됨.

## 전자상거래 시스템 예시
![서브도메인과 바운디드 컨텍스트를 포함한 도메인](https://user-images.githubusercontent.com/13076271/46058907-de623280-c197-11e8-9be3-734184d39f02.png)

- 전자상거래 라는 전체 비즈니스 도메인.
- 논리적으로 상품 카탈로그, 주문, 송장, 배송 네 부분의 주요 서브도메인으로 이뤄짐.
- 반면 물리적으로는 모두 같은 시스템 안에 구성되어 있음. 하나의 시스템이 많은 비즈니스 기능을 책임지고 있음.
- 새로운 기능 추가를 위해 다양한 논리적 모델이 더욱 커져감에 따라, 대립되는 관심사 때문에 진행에 방해를 받음.
- 재고 관리의 경우 오직 하나의 서브 도메인이 있음. 외형적으론 재고 관리 시스템이 전자상거래 시스템보다 DDD적인 상태가 더 낫다고 볼 수 있음. 용어와 의미의 충돌이 적고 통합이 쉬울 가능성이 높기 때문임.
