# 도메인 주도 설계

> 에릭에반스, 이대엽 역, 위키북스, 2011 [링크](http://www.yes24.com/24/Goods/5312881?Acode=101)



# 1부 동작하는 도메인 모델 만들기

- 모든 소프트웨어는 그 소프트웨어를 사용하는 사용자 활동이나 관심사와 관련돼 있음. 사용자가 프로그램을 사용하는 대상 영역이 바로 해당 소프트웨어의 도메인(Domain)임.
- 소프트웨어의 본질은 해당 소프트웨어 사용자를 위해 도메인에 관련된 문제를 해결하는 능력에 있음.
- 따라서 개발팀은 사용자 활동과 관련된 지식 체계에 집중해야 하는데 이 지식의 폭은 위압적일 수 있음. 모델은 **지식을 선택적으로 단순화하고 의식적으로 구조화** 한 형태.

##### 도메인 주도 설계에서 모델의 유용성
1. 모델과 핵심 설계는 서로 영향을 주며 구체화 됨.
2. 모델은 모든 팀 구성원이 사용하는 언어의 중추.
3. 모델은 지식의 정수만을 뽑아낸 것.

## 1장 지식탐구
지식탐구는 팀 내 지식을 가치 있는 모델로 만듬.
- 엄청난 양의 정보 속에서 아주 미미한 관련성을 찾음. 전체를 이해할 수 있는 간결한 관점을 찾아 체계적인 아이디어들을 차례로 시도. 그 과정에서 수 많은 모델이 시도, 거부, 변형 됨.
- 지식 탐구는 혼자서 하는 활동이 아님. 개발자와 도메인 전문가로 구성된 팀은 대체로 개발자가 이끄는 가운데 협업함.
- 도메인 모델의 지속적인 정제를 토대로 개발자는 기능만을 기계적으로 만드는데 머무르지 않고 자신이 보조하고 있는 업무의 중요 원칙들을 배움.
- 모델은 결코 완벽해질 수 없음. 다만 계속 발전해 나갈 뿐.

## 2장 의사소통과 언어 사용
도메인 모델은 소프트웨어 프로젝트를 위한 공통 언어의 핵심이 될 수 있음. 프로젝트에서 언어를 사용하는 것은 미묘하지만 아주 중요.

- 도메인 전문가는 자신의 전문 용어를 사용하고 개발팀은 설계 측면에서 도메인에 관한 토론에 적합한 자신들만의 언어를 사용
- 일상적인 토론에서 쓰이는 용어가 코드에 녹아든 용어와 단절

이런 일은 발생하면 번역이 필요하게 되고 번역은 의사소통을 무디게 하고 지식 탐구를 빈약하게 만듬.

> 위에서 언급 된 번역의 문제 말고, 영어 - 한국어 간의 번역 문제는 어떨까. 코드는 영어로 작성 되는데 도메인 전문가와의 토론에는 한국어를 사용해야 한다. 즉, 코드 상에서 모델들은 전부 영어로 번역되야 하는데 이 과정에서 발생하는 문제는?

##### 유니쿼터스 언어(Ubiquitous Language)를 구성하는 어휘
- 클래스와 주요 연산의 이름
- 모델 내 명시적으로 드러나는 규칙을 토론하기 위한 용어
- 모델에 부과된 높은 수준의 구성 원칙에서 비롯된 용어
- 팀에서 일반적으로 도메인 모델에 적용하는 패턴의 이름

모델 기반 언어는 개발자 사이에서 시스템 산출물 뿐 아니라 업무와 기능을 기술할 때도 사용해야 함. 아울러 이 모델은 개발자 - 도메인 전문가가 서로 의사소통하는 것 뿐 아니라 도메인 전문가들끼리 소통하는데도 언어를 제공해야 함. **언어의 변화는 도메인 모델의 변화로 인식**되어야 한다.

## 3장 모델과 구현의 연계
도메인 주도 설계에서는 초기 분석 단계에 도움될 뿐 아니라 설계의 기반이 되는 모델이 필요. 코드와 그것의 기반이 되는 모델이 긴밀하게 연결되면 코드에 의미가 부여되고 모델과 코드가 서로 대응하게 됨.
순수하게 이론에만 치우친 분석 모델(analysis model)은 심지어 도메인의 이해라는 가장 주된 목표에 미치지 못하기도 하는데, 중요한 발견은 언제나 설계/구현을 위해 노력하는 가운데 나타나기 때문. 설계 혹은 설계의 주된 부분이 도메인 모델과 대응하지 않는다면 그 모델은 가치가 없음.

> 객체 설계에서의 진정한 도약은 코드가 모델의 개념을 표현할 때 나온다.



# 2부 모델 주도 설계의 기본 요소

## 4장 도메인의 격리

도메인에 관련된 코드가 상당한 양의 도메인과 관련 없는 다른 코드가 섞여 있을 때, 도메인에 관련된 코드를 확인하고 추론하기가 굉장히 힘들어짐. 예를 들어 UI를 표면적으로 변경하는 것이 실질적으로 업무 로직을 변경하는 것으로 이어질 수 있음.

![layered-archicture](https://www.citerus.se/wp-content/uploads/2009/09/dddlayers.png)

소프트웨어 프로그램은 갖가지 작업을 수행하는 설계와 코드가 포함됨. 이를 분리하는 방법은 다양하지만 LAYERED ARCHITECTURE가 널리 받아들여지고 있음. 
- 한 계층의 모든 요소는 오직 같은 계층에 존재하는 다른 요소나 계층상 "아래"에 위치한 요소에만 의존. 즉, 한 방향으로만 느슨하게 결합됨.
- 각 계층에서 컴퓨터 프로그램의 특정 측면만을 전문적으로 다룸. 이로써 각 측면에서 더욱 응집력 있는 설계가 가능하고, 설계를 이해하기 쉬워짐.

> 도메인계층 (또는 모델 계층): 업무 개념과 업무 상황에 관한 정보, 업무 규칙을 표현하는 일을 책이짐. 이 계층에서는 업무 상황을 반영하는 상태를 제어하고 사용하며, 그와 같은 상태 저장과 관련된 기술적인 세부사항은 인프라스트럭처에 위임. 이 계층이 업무용 소프트웨어의 핵심.

도메인 모델과 관련 된 코드를 모두 한 계층에 모으고 사용자 인터페이스, 애플리케이션 코드, 인프라스트럭처 코드와 격리함으로써 도메인 모델을 표현하는 것에만 집중할 수 있음. 이로써 모델은 진화를 거듭해 본질적인 업무 지식을 포착해서 풍부하고 명확해질 것임.
