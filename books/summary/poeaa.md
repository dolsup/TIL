# 엔터프라이즈 애플리케이션 아키텍처 패턴
> 마틴파울러 저. 최민석 역. 위키북스. 2015 [[상세정보]](https://book.naver.com/bookdb/book_detail.nhn?bid=9699564)

## 아키텍처
- 아주 많은 사람들이 정의하려고 하지만 의견이 분분한 용어.
- 여러 정의가 있지만 그 중 공통적 요소는 (1) 하나의 시스템을 구성 요소로 나누는 최상위 수준의 분해를 의미하며 (2) 번복하기 어려운 결정을 의미.
- 번복이 어렵기 때문에 개발자들은 되도록 일찍, 올바르게 결정을 내리고 싶어 함.
- GOF의 한사람인 랄프 존슨은 아키텍쳐란 '프로젝트에 참여하는 전문 개발자의 시스템 설계에 대한 공유된 이해를 반영하는 *주관적 개념*'이라고 지적.
- 이 책에서 앞으로 아키텍처에서 중요한 부분에 대한 통철력과 가급적 일찍 내려야 하는 결정에 대해 설명.

## 엔터프라이즈 애플리케이션
- 지속적 데이터(persistent data)를 처리.
- 막대한 양의 데이터를 처리.
- 여러 사람이 동시에 데이터에 접근.
- 사용자 인터페이스 화면의 수도 많음.
- 다른 엔터프라이즈 애플리케이션과 통합해야 하는 경우가 많음.

## 계층화
- 복잡한 소프트웨어 시스템을 분할하는데 사용하는 가장 일반적 기법.
- 불투명한 구조. 상위 계층은 하위 계층을 알지만 반대는 인식하지 못함. 또한 바로 아래 계층 보다 더 하위에 있는 계층은 알 지 못함.
- 이런 구조로 가지는 장점은 하위의 단일 계층을 하나의 일관된 계층으로 이해할 수 있음.
- 또한 계층 간의 의존성을 최소화 할 수 있으며 재사용이 가능함. 하위 계층은 특정 상위 계층에 의존적이지 않기 때문.
- 그러나 하위 계층의 변경으로 인해 상위 계층이 연쇄적으로 변경이 불가피할 수 있음. 예를 들어 UI에 표시해야 하는 필드가 데이터베이스에도 있어야 하므로 그 사이에 있는 모든 계층에 해당 필드를 추가해야 함.
- 계층(layer)와 티어(tier)는 종종 같은 의미로 사용 다르지만 일반적으로 다름. 티어는 물리적 분리를 함축하는 경우가 많음. 예컨데 서버-클라이언트 모델은 2티어 시스템이라고 할 수 있음.

## 3계층 시스템
- 도메인 논리를 각 UI 화면에 삽입하여 중복을 만들거나, 저장 프로시저로 만듦으로써 특정 데이터베이스 벤더에 의존적인 문제에 대한 해결책으로 객체 커뮤니티에서 3계층 시스템을 제안.
- 프레젠테이션, 도메인, 데이터 원본 계층으로 나뉨.
- 도메인 논리 작업 중 가장 어려운 점은 도메인 논리와 다른 형태의 논리를 구분하기 어렵다는 점. 경우에 따라 논리를 UI에 넣는 것이 지옥으로 들어가는 문일 수도 있고 합리적 선택일 수도 있음.

## 대칭 아키텍처와 비대칭 아키텍처
![image: Hexagonal Architecture](https://camo.githubusercontent.com/9026dd45caa0030e46bd31df92ce588cc311e432/68747470733a2f2f73746566616e6f616c6c657474692e66696c65732e776f726470726573732e636f6d2f323031372f31302f636c65616e2d6172636869746563747572652e706e673f773d35393026683d333333)
> 이미지 출처 Stefano Alletti Blog - [Hexagonal Architecture](https://stefanoalletti.wordpress.com/2017/10/27/hexagonal-architecture/)
- 소프트웨어를 작동시키는 것이 항상 사람은 아님. 특정 프로그램 또는 무언가 다른 것일 수 있음.
- 이 경우 프레젠테이션과 데이터 원본 계층이 외부 세계와 연결한다는 점이 비슷하다는 것을 알게됨.
- 앨리스테어 콕번이 주장한 육각 아키텍처(Hexagonal Architecture) 패턴은 프레젠테이션과 데이터 원본을 나누지 않고 외부 시스템에 대한 인터페이스에 둘러싸인 대칭 아키텍처를 보여줌.
- 하지만 저자는 프레젠테이션과 데이터 원본의 구분이 유용하다고 생각한다고 기술함.
- 프레젠테이션은 사용자 인터페이스 또는 원격 프로그램 인터페이스이든 시스템이 다른 사람에게 제공하는 서비스에 대한 외부 인터페이스로 정의.
- 반면 데이터 원본은 프로그램에 제공하는 서비스에 대한 외부 인터페이스로 정의함.

